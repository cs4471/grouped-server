{
  <% unless defined? @error %>
    "checkins": [
    	<% @checkins.each_with_index do |checkin, index| %>
    	{
    		"id": <%= checkin.id %>,
    		"member_id": <%= checkin.member_id %>
    		
    		<% checkin.has_attribute? "nickname" %>
    			, "nickname": <%= checkin.nickname %>
    		<% end %>

    		<% checkin.has_attribute? "status" %>
    			, "status": <%= checkin.status %>
    		<% end %>

    		<% checkin.has_attribute? "location" %>
    			, "location":{
    				"lat": <%= checkin.location.lat %>,
    				"lng": <%= checkin.location.lng %>,
    				"certainty": <%= checkin.location.certainty %>
    			}
    		<% end %>
    	}

    		<% unless index == @checkins.length - 1 %>
    			,
    		<% end %>
    	<% end %>
    ]

  <% else %>
    "error": <%= @error %>
  <% end %>
}