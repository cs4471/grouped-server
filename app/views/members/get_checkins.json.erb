{
  <% unless defined? @error %>
    "checkins": [
    	<% @checkins.each_with_index do |checkin, index| %>
    	{
        "id": <%= checkin[:id] %>,
        "member_id": <%= checkin[:member_id] %>
    		
        <% if checkin.has_key? :nickname %>
          , "nickname": "<%= checkin[:nickname] %>"
    		<% end %>

        <% if checkin.has_key? :status %>
          , "status": "<%= checkin[:status] %>"
    		<% end %>

        <% if checkin.has_key? :location %>
    			, "location":{
            "lat": "<%= checkin[:location][:lat] %>",
            "lng": "<%= checkin[:location][:lng] %>",
            "certainty": "<%= checkin[:location][:certainty] %>"
    			}
    		<% end %>
    	}

    		<% unless index == @checkins.length - 1 %>
    			,
    		<% end %>
    	<% end %>
    ]
  <% else %>
    "error": <%= @error %>
  <% end %>
}